(function(){var e={667:function(e,t,n){"use strict";var i=n(9242),s=n(3396),o=n(7139),r=n.p+"img/header-szasz.f3b585eb.jpg";const a={class:"container"},l={class:"row"},c={class:"mt-4"},u={class:"upload-section d-flex justify-content-center"},d=["disabled"],g={key:0,class:"d-flex justify-content-center mt-2"},f=(0,s._)("div",{class:"row mt-4"},[(0,s._)("div",{class:"col"},[(0,s._)("div",{class:"header-image-container"},[(0,s._)("img",{src:r,alt:"Header Image",class:"img-fluid"})])])],-1),p={class:"row mt-4"},h={class:"col"},m={class:"grid-container"},v=["href"],b=["src"],w={key:1,controls:"",poster:r},y=["src"],k=["onClick"],_={key:0,class:"overlay"},C=(0,s._)("div",{class:"spinner-border text-primary",role:"status"},[(0,s._)("span",{class:"visually-hidden"},"Loading...")],-1),F=[C];function I(e,t,n,i,r,C){return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",a,[(0,s._)("div",l,[(0,s._)("div",c,[(0,s._)("div",u,[(0,s._)("input",{type:"file",ref:"fileInput",accept:"image/*, video/*",style:{display:"none"},onChange:t[0]||(t[0]=(...e)=>C.handleFileInputChange&&C.handleFileInputChange(...e)),multiple:""},null,544),(0,s._)("button",{class:"btn btn-success me-3",onClick:t[1]||(t[1]=(...e)=>C.openFileInput&&C.openFileInput(...e))}," Válaszd ki a képeket! "),(0,s._)("button",{disabled:C.isUploadDisabled,class:"btn btn-success",onClick:t[2]||(t[2]=(...e)=>C.uploadFiles&&C.uploadFiles(...e))}," Feltöltés ",8,d)]),C.selectedFilesCount>0?((0,s.wg)(),(0,s.iD)("div",g,(0,o.zw)(C.selectedFilesCount)+" feltöltésre kiválasztott fotó(k). ",1)):(0,s.kq)("",!0)])]),f,(0,s._)("div",p,[(0,s._)("div",h,[(0,s._)("div",m,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.images,((e,t)=>((0,s.wg)(),(0,s.iD)("div",{key:t},[C.isImage(e)?((0,s.wg)(),(0,s.iD)("a",{key:0,href:e,class:"grid-item"},[(0,s._)("img",{src:e,alt:"Image"},null,8,b)],8,v)):C.isVideo(e)?((0,s.wg)(),(0,s.iD)("video",w,[(0,s._)("source",{src:e},null,8,y),(0,s.Uk)(" Your browser does not support the video tag. ")])):(0,s.kq)("",!0),r.isAdmin?((0,s.wg)(),(0,s.iD)("button",{key:2,onClick:e=>C.showConfirmation(t),class:"btn btn-danger delete-button"}," x ",8,k)):(0,s.kq)("",!0)])))),128))])])])]),r.loading?((0,s.wg)(),(0,s.iD)("div",_,F)):(0,s.kq)("",!0)],64)}n(7658);var O=n(6304),x=n(4300),N={data(){return{isAdmin:!1,adminParam:"Edcvgy12!",images:[],lightbox:null,selectedFiles:[],connectionSAS:"https://weddingdz.blob.core.windows.net/?sv=2022-11-02&ss=bf&srt=sco&sp=rwdlaciyx&se=2023-08-31T00:17:58Z&st=2023-07-25T16:17:58Z&spr=https&sig=SNfN0s5QgF%2Bgjg83fRNYgeHfFPA%2BpN2yUv9ZJ%2BYFIzM%3D",containerName:"szasz-images",loading:!1}},computed:{isUploadDisabled(){return 0===this.selectedFiles.length},selectedFilesCount(){return this.selectedFiles.length}},async mounted(){const e=new URLSearchParams(window.location.search),t=e.get("admin");t==this.adminParam&&(this.isAdmin=!0),this.loading=!0,await this.fetchImages(),this.lightbox=new x.Z(".grid-container a"),this.loading=!1},methods:{async fetchImages(){try{const e=new O.N(this.connectionSAS),t=e.getContainerClient(this.containerName),n=t.listBlobsFlat({prefix:"",includeMetadata:!0}),i=[];for await(const s of n)i.push(s);i.sort(((e,t)=>t.properties.createdOn.valueOf()-e.properties.createdOn.valueOf())),this.images=i.map((e=>t.getBlobClient(e.name).url))}catch(e){console.error("Error retrieving images:",e)}},openFileInput(){this.$refs.fileInput.click()},handleFileInputChange(e){this.selectedFiles=Array.from(e.target.files)},async uploadFiles(){this.loading=!0;try{const e=this.selectedFiles,t=new O.N(this.connectionSAS),n=t.getContainerClient(this.containerName);for(let i=0;i<e.length;i++){const t=e[i],s=this.generateUniqueBlobName(t.name),o=n.getBlockBlobClient(s);await o.uploadBrowserData(t)}this.selectedFiles=[],console.log("Files uploaded successfully!"),await this.fetchImages()}catch(e){console.error("Error uploading files:",e)}this.loading=!1},generateUniqueBlobName(e){const t=Date.now(),n=e.substr(0,e.lastIndexOf(".")),i=e.substr(e.lastIndexOf("."));return`${n}_${t}${i}`},removeQueryParams(e){const t=e.indexOf("?");return-1!==t?e.substring(0,t):e},isImage(e){const t=this.removeQueryParams(e),n=t.split(".").pop().toLowerCase();return["jpg","jpeg","png","gif"].includes(n)},isVideo(e){const t=this.removeQueryParams(e),n=t.split(".").pop().toLowerCase();return["mp4","mov","avi","mkv"].includes(n)},showConfirmation(e){confirm("Are you sure you want to delete this item?")&&this.deleteItem(e)},deleteItem(e){const t=this.images[e],n=new O.N(this.connectionSAS),i=n.getContainerClient(this.containerName),s=decodeURI(this.getImageBlobName(this.removeQueryParams(t)));i.deleteBlob(s).then((()=>{alert("Deleted"),this.images.splice(e,1)})).catch((e=>{alert("Error"),console.error("Error deleting blob:",e)}))},getImageBlobName(e){const t=e.split("/");return t[t.length-1]}}},S=n(89);const j=(0,S.Z)(N,[["render",I]]);var D=j;(0,i.ri)(D).mount("#app")},4598:function(){}},t={};function n(i){var s=t[i];if(void 0!==s)return s.exports;var o=t[i]={exports:{}};return e[i].call(o.exports,o,o.exports,n),o.exports}n.m=e,function(){var e=[];n.O=function(t,i,s,o){if(!i){var r=1/0;for(u=0;u<e.length;u++){i=e[u][0],s=e[u][1],o=e[u][2];for(var a=!0,l=0;l<i.length;l++)(!1&o||r>=o)&&Object.keys(n.O).every((function(e){return n.O[e](i[l])}))?i.splice(l--,1):(a=!1,o<r&&(r=o));if(a){e.splice(u--,1);var c=s();void 0!==c&&(t=c)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[i,s,o]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.p="/eskuvo/"}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,i){var s,o,r=i[0],a=i[1],l=i[2],c=0;if(r.some((function(t){return 0!==e[t]}))){for(s in a)n.o(a,s)&&(n.m[s]=a[s]);if(l)var u=l(n)}for(t&&t(i);c<r.length;c++)o=r[c],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return n.O(u)},i=self["webpackChunkwedding_photos_upload"]=self["webpackChunkwedding_photos_upload"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=n.O(void 0,[998],(function(){return n(667)}));i=n.O(i)})();
//# sourceMappingURL=app.e2b96165.js.map